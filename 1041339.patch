# HG changeset patch
# Parent ac621df2174afebd1530a2b1f731927ab996031b
# User Jose Antonio Olivera Ortega <josea.olivera@gmail.com>
Bug 1041339 - ServiceWorkers: Update implementation based on clarification of force-refresh. r=nsm

diff --git a/dom/base/nsDocument.cpp b/dom/base/nsDocument.cpp
--- a/dom/base/nsDocument.cpp
+++ b/dom/base/nsDocument.cpp
@@ -4789,17 +4789,16 @@ nsDocument::SetScriptGlobalObject(nsIScr
     mTemplateContentsOwner->SetScriptGlobalObject(aScriptGlobalObject);
   }
 
   nsCOMPtr<nsIChannel> channel = GetChannel();
   if (!mMaybeServiceWorkerControlled && channel) {
     nsLoadFlags loadFlags = 0;
     channel->GetLoadFlags(&loadFlags);
     // If we are shift-reloaded, don't associate with a ServiceWorker.
-    // FIXME(nsm): Bug 1041339.
     if (loadFlags & nsIRequest::LOAD_BYPASS_CACHE) {
       NS_WARNING("Page was shift reloaded, skipping ServiceWorker control");
       return;
     }
 
     nsCOMPtr<nsIServiceWorkerManager> swm = mozilla::services::GetServiceWorkerManager();
     if (swm) {
       swm->MaybeStartControlling(this);
