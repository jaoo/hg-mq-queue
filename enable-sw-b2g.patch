# HG changeset patch
# User Jose Antonio Olivera Ortega <jaoo@jaoo.es>
# Parent  56e207dbb3bda446e30c8a9fcf16050f35a58fb9
Enable service workers on b2g

diff --git a/b2g/app/b2g.js b/b2g/app/b2g.js
--- a/b2g/app/b2g.js
+++ b/b2g/app/b2g.js
@@ -1143,14 +1143,22 @@ pref("dom.requestSync.enabled", true);
 
 // Resample touch events on b2g
 pref("gfx.touch.resample", true);
 
 // Comma separated list of activity names that can only be provided by
 // the system app in dev mode.
 pref("dom.activities.developer_mode_only", "import-app");
 
-// mulet apparently loads firefox.js as well as b2g.js, so we have to explicitly
-// disable serviceworkers here to get them disabled in mulet.
-pref("dom.serviceWorkers.enabled", false);
+// // mulet apparently loads firefox.js as well as b2g.js, so we have to explicitly
+// // disable serviceworkers here to get them disabled in mulet.
+// pref("dom.serviceWorkers.enabled", false);
 
 // Retain at most 10 processes' layers buffers
 pref("layers.compositor-lru-size", 10);
+
+pref('network.disable.ipc.security', true);
+pref('dom.caches.enabled', true);
+pref('dom.apps.developer_mode', true);
+pref('dom.webcomponents.enabled', true);
+pref("dom.serviceWorkers.enabled", true);
+pref("dom.serviceWorkers.interception.enabled", true);
+pref("dom.serviceWorkers.testing.enabled", true);
